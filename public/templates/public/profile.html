{% extends 'base.html' %}
{% load static %}
{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'public/css/index.css' %}">
    <!--FONT AWESOME CSS FILES-->
    <link
            crossorigin="anonymous"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css"
            integrity="sha256-46qynGAkLSFpVbEBog43gvNhfrOj+BmwXdxFgVK/Kvc="
            rel="stylesheet"
    />
{% endblock %}
{% comment %} once user create appointment, he can log in into his account to edit or delete appointment{% endcomment %}
{% block  content %}
    <div class="col-12 mt-5"></div>


    <div class="container">
        <div class="row ">

            <h1 class="font-weight-bold display-5  text-info col-lg-12"> Hi {{ user }}
            </h1>
            <div class="col-lg-8 border">
                <div class="card-header bg-transparent border-0">
                    <p class="lead font-weight-bold display-5  text-info">Your consultations</p>
                    <hr class="bg-info">
                </div>
                {% if consultations %}

                    {% for consult in consultations %}




                        <p><span class="font-weight-bold text-info">Site type:</span>
                            <strong>
                                {% if consult.site_type == "1" %}
                                    blog
                                {% elif  consult.site_type == "2" %}
                                    website
                                {% elif  consult.site_type == "3" %}
                                    online store
                                {% else %}
                                    something else
                                {% endif %}
                            </strong>
                            <small class="float-right">Created at : {{ consult.date }}</small>
                        </p>


                        {% if consult.done %}

                            <span class="lead float-right btn btn-lg btn-outline-info"
                            >consultation done <span class="text-success">&check;</span></span>
                            {% comment %} user can delete consultation {% endcomment %}
                            <form action="{% url 'delete_consultation' consult.id %}">
                                <input type="submit" value="delete consultation"
                                       class="bg-danger text-light col-md-4 offset-mb-8 mb-3">

                            </form>

                        {% else %}
                            <a
                                    data-cy="edit_consultation"
                                    class="lead float-right btn btn-outline-info"
                                    href="/edit/consultation/{{ consult.id }}"> edit consultation</a>
                        {% endif %}


                        <p><span class="font-weight-bold text-info">Time to contact you:</span> <strong>
                            {% if consult.time_slot == "1" %}
                                8 am - 12 am
                            {% elif  consult.time_slot == "2 " %}
                                12 am - 16 am
                            {% else %}
                                16 am - 20 am

                            {% endif %}
                        </strong></p>
                        <p><span
                                class="font-weight-bold text-info">Your project:</span><br>
                            <strong style=" word-wrap: break-word;">{{ consult.project }}</strong>
                        </p>

                        <hr class="bg-info">
                    {% endfor %}
                {% endif %}

            </div>
            <div class="col-lg-4 bg-light">
                <div class="card-header bg-transparent border-0">
                    <p class="lead font-weight-bold display-5  text-info">Your purchases</p>
                    <hr class="bg-info">
                </div>

                <div class="card-body">
                    {% if orders %}

                        <ul class="list-group">
                            {% for order in orders %}
                                <li class="list-group-item bottom_border">{{ order.product_type }}
                                    <span class="float-right text-success included">
                                      {{ order.grand_total }}
                                  </span>
                                    <br>
                                    <small>Purchased at: {{ order.date }}</small>

                                </li>
                            {% endfor %}
                        </ul>

                    {% else %}
                        <h1 class="font-weight-bold  text-info">Are you ready to start your dream?</h1>
                    {% endif %}

                    <a href="{% url 'checkout' 'blog' %}"
                       class="lead  btn  btn-outline-info mt-2">
                        Blog <span>299</span> &euro;
                    </a>
                    <a href="{% url 'checkout' 'website' %}"
                       class="lead  btn  btn-outline-info  mt-2">
                        Website <span>999</span> &euro;
                    </a>
                    <a href="{% url 'checkout' 'online_store' %}"
                       class="lead  btn  btn-outline-info  mt-2">
                        Online Store <span>1999</span> &euro;
                    </a>
                    <a href="{% url 'checkout' 'consultation' %}"
                       class="consultation lead  btn  btn-outline-info   mt-2">
                        Extra consultation 99 &euro;</a>

                </div>
            </div>


        </div>


    </div>

{% endblock %}